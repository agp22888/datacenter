<html>
<head>
<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
<script>
$(document).ready(function() {
    document.getElementById("myInput").addEventListener("focusout", blur);
    document.getElementById("myInput").addEventListener("focus", searchFunction);
});

function blur() {
    console.log("blur")
    document.getElementById("myDropdown").innerHTML="";
};

function searchFunction(){
    console.log(document.getElementById('myInput').value);
    $.ajax({
        url: "{% url 'ajax' %}",
        type: 'GET',
        data: {'action': 'search', 'query':document.getElementById('myInput').value},
        dataType: "json",
        success: function(resp){
            document.getElementById("myDropdown").innerHTML="";
            $.each(resp, function(idx, obj) {
                    //console.log(idx);
                    //console.log(obj);
                    element = document.createElement('a');
                    element.innerHTML = obj.fields.hostname
                    element.href = "{% url 'server_view_without_parameters' %}"+obj.pk;
                    p = document.createElement('p');
                    p.appendChild(element);
                    document.getElementById("myDropdown").appendChild(p);
                });
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert(errorThrown+'initial load');
        }
    });
};


</script>

</head>
<body>
<div class="dropdown">
    <input type="text" placeholder="Поиск..." id="myInput" onkeyup="searchFunction()" >
    <div id="myDropdown" class="dropdown-content">

    </div>
</div>
</body>
</html>